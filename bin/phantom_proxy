#!/usr/bin/env ruby

require 'thin'

require 'fileutils'
require 'timeout'
require 'stringio'
require 'time'
require 'forwardable'
require 'rack'
require 'daemons'

module PhantomJSProxy
	CONFIG = File.expand_path(File.dirname(__FILE__))+"/../lib/phantom_proxy/config.ru"
end

# Become a daemon
options = {
		:app_name		=> "phantomjs_proxy",
    :backtrace  => true,
    :ontop      => true,
    :log_output => true
  }
#Daemons.daemonize(options)

startoptions = ["start", "-R", PhantomJSProxy::CONFIG]+ARGV

#ARGV
Thin::Runner.new(startoptions).run!
